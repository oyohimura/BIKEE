<div class="container">
  <h1> Rental requests for my bikes </h1>
  <% total = [] %>
  <% @rents.each do |rent| %>
    <div class="bike-card-actions">
      <p>Bike :          <%= rent.bike.model %> from <%= rent.bike.brand %></p>
      <p>Rented by :     <%= "#{rent.user.first_name} #{rent.user.last_name}" %></p>
      <p>From:           <%= rent.start_date %> to <%= rent.end_date %>
      <p>Total duration: <%= rent.rental_duration %> hours</p>
      <p>Total price:    <%= rent.total_price %>€</p>
      <p>Status: <%= rent.status %></p>
      <% if rent.approved? %>
        <% total << rent.total_price %>
      <% end %>
      <p>
        <% if rent.pending? %>
          <%= link_to 'Approve', approve_request_path(rent), data: {turbo_method: :patch }, class: 'btn btn-success' %>
          <%= link_to 'Reject', reject_request_path(rent), data: {turbo_method: :patch }, class: 'btn btn-danger' %>
        <% end %>
      </p>
    </div>
  <% end %>

  <p>Total earnings</p><%= total.sum %>€
  <div class="bike-card-actions">
    <%= link_to 'Back to dashboard', dashboard_path %>
  </div>
</div>
